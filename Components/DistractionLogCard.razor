@using System.Globalization
<MudCard Square>
    <MudCardHeader>
        <CardHeaderContent>
            <MudStack Row>
                @foreach (var tag in @model.Tags)
                {
                    <MudChip T="DistractionTagViewModel" Text="@tag.Name" Icon="@tag.Icon" Color="@tag.Color"></MudChip>
                }
                <MudText>@GetJustTime(model.DateOfCreation)</MudText>
            </MudStack>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent>
        <MudText Typo="Typo.h5">@model.Notes</MudText>
    </MudCardContent>
    <MudCardActions Style="margin-left:auto;">
        <MudButton Variant="Variant.Filled" Color="Color.Error" OnClick="@NotifyDelete">Delete</MudButton>
    </MudCardActions>
</MudCard>

@code {
    [Parameter]
    public DistractionLogViewModel model { get; set; }

    [Parameter]
    public EventCallback<long> OnDelete { get; set; }

    private string GetJustTime(DateTime fullDate)
    {
        TimeOnly timeFromDate = TimeOnly.FromDateTime(fullDate);
        string output = timeFromDate.ToString("T", CultureInfo.CurrentCulture);
        return output;
    }

    private async Task NotifyDelete()
    {
        await OnDelete.InvokeAsync(model.Id);
    }
}
